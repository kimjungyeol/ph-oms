<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="sample/layouts/default-layout">
<th:block layout:fragment="content">
    <div class="container">
        <h2>Board - Register - validation</h2>
        <div data-trigger="button" class="mb-5 row">
        	<div class="col">
	            <div class="float-start">
	                <button type="button" class="btn btn-danger" id="saveBtn">Save</button>
	            </div> 
        	</div>
        	<div class="col">
	            <div class="float-end">
	            </div>
            </div>
        </div>
        <div data-trigger="form">
            <div class="mb-3">
                <label class="form-label fw-bold">Title.</label>
                <input type="text" class="form-control" id="title" name="title" maxlength="25">
            </div>
            <div class="mb-3">
                <label class="form-label fw-bold">Contents.</label>
                <textarea class="form-control" id="contents" name="contents" rows="5" maxlength="1000"></textarea>
            </div>
        </div>
        <div data-trigger="form">
            <div class="mb-3 row">
            	<div class="col">
	                <label class="form-label fw-bold">Email.</label>
                	<input type="text" class="form-control" id="email" name="email" maxlength="200" style="width:200px;">
            	</div>
            	<div class="col">
	                <label class="form-label fw-bold">Price.</label>
	                <input type="text" class="form-control" id="price" name="price" maxlength="3" style="width:100px;">
            	</div>
            </div>
            <div class="mb-3 row">
            	<div class="col">
	                <label class="form-label fw-bold">Telno.</label>
                	<input type="text" class="form-control" id="telno" name="telno" maxlength="200" style="width:150px;">
            	</div>
            	<div class="col">
	                <label class="form-label fw-bold">Mobile.(xxx-xxxx-xxxx)</label>
	                <input type="text" class="form-control" id="mobile" name="mobile" maxlength="13" style="width:150px;">
            	</div>
            </div>
            <div class="mb-3 row">
                <div class="col">
                    <label class="form-label fw-bold">Use.</label>
                    <div style="width: 150px;">
                        <input class="form-check-input" type="radio" name="useYn" id="useYn1" value="Y">
                        <label class="form-check-label" for="useYn1">사용</label>
                        <input class="form-check-input" type="radio" name="useYn" id="useYn2" value="N">
                        <label class="form-check-label" for="useYn2">미사용</label>
                    </div>
                </div>
                <div class="col">
                    <label class="form-label fw-bold">Use-selectbox.</label>
                    <div>
                        <select id="use_select" name="use_select" style="width: 100px;">
                            <option value="">--Select-</option>
                            <option value="Y">사용</option>
                            <option value="N">미사용</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="mb-3 row">
            	<div class="col">
                	<label class="form-label fw-bold">date - ymd.</label>
            		<div>
                		<div data-component-datepicker="basic" id="dateymd" style="width: 120px;"></div>
                		<!-- input : id 가 'dateymd' 로 생성 됨. -->
                	</div>
		        </div>
            	<div class="col">
            		<label class="form-label fw-bold">rage date - ymd.</label>
            		<div>
	            		<div data-component-datepicker="range" id="ragedateymd" style="width: 120px;"></div>
	            		<!-- input ~ input :  id가 'start_ragedateymd', 'end_ragedateymd' 로 생성 됨.-->
            		</div>
            	</div>
	        </div>
	        <!-- <div class="row col-md-4">
                <label class="col-md-4 col-form-label">달력</label>
                <div class="col-md-8">
                    <div class="input-group">
                        <input class="form-control" type="time" id="time" style="width:200px;"/>
                        <input class="form-control" type="date" id="date" style="width:200px;"/>
                        <input class="form-control" type="datetime-local" id="datetime" style="width:200px;"/>
                    </div>
                </div>
            </div> -->
        </div>
    </div>
    
    <script th:inline="javascript">
        'use strict';
        // 1.page init area.
        ;(function(co, fn) {
            co.initParams = {}
            
            co.uriMap = {
                save   : '/sample/board/register/save',
            }
            
            co.moveMap = {}
            
            //validation check시 필수 지정.
            //wg.g.regExp 정규식 지정되어 있음. (global.core.js)
            //{ id : [regExpKey,|....] } 
            //필요한 정규식 key값을 지정.
            //input radio - valudation 지정시 name 사용.
            //use : if (!fn.form.validation(co.validation)) { return; }
            co.validation = {
           		title: ['required', 'string'],
           		contents: ['eng'],
           		email: ['email'],
           		price: ['number'],
           		telno: ['telno'],
           		mobile: ['mobile'],
           		useYn: ['required'],
           		use_select: ['required'],
           		dateymd: ['required', 'dateEn'], 
           		start_ragedateymd: ['dateEn'],
           		end_ragedateymd: ['dateEn'],
            }
            
        })(wg.c, wg.f);
        
        // 2.function area.
        ;(function(co, fn, trigger) {
            fn.save = function() {
            	//form validation check.
            	if (!fn.form.validation(co.validation)) { return; }
            	
            	fn.msg.confirm.save(function(isOk) {
            		if (!isOk) { return; }
            		
	            	// data-trigger="form" 속성 하위 dom.
	            	//   - id가 지정 되어 있는 모든 dom의 key value를 가져온다.
	            	let data = fn.form.getData();
	            	
	            	console.log('save data ==== ', data);
	            	
	            	let opt = {
	               		uri : co.uriMap.save,
	               		params : data
	               	}
	            	fn.api.save(opt, function(res) {
	                    console.log('save callback fnc!!', res);
	                });
            	});
            }
            
        })(wg.c, wg.f, wg.t);
        
        // 3.event area.
        ;(function(co, fn, trigger) {
            fn.event = function() {
                //save.
                $(trigger.button.saveBtn).click(function() {
                    fn.save();
                });
            }
        })(wg.c, wg.f, wg.t);
    </script>
    <script th:inline="javascript">
        'use strict';
        $(document).ready(() => {
            const fn = wg.f;
            
            // event load.
            fn.event();
        });
    </script>
</th:block>
</html>
